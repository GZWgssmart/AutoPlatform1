<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.gs.dao.AccessoriesSaleDAO" >
  <resultMap id="AccessoriesSaleMap" type="com.gs.bean.AccessoriesSale" >
    <id column="acc_Sale_Id" property="accSaleId" jdbcType="VARCHAR" />
    <result column="accId" property="accId" jdbcType="VARCHAR" />
    <result column="accSaledTime" property="accSaledTime" jdbcType="TIMESTAMP" />
    <result column="accSaleCount" property="accSaleCount" jdbcType="INTEGER" />
    <result column="accSalePrice" property="accSalePrice" jdbcType="DOUBLE" />
    <result column="accSaleTotal" property="accSaleTotal" jdbcType="DOUBLE" />
    <result column="accSaleDiscount" property="accSaleDiscount" jdbcType="DOUBLE" />
    <result column="accSaleMoney" property="accSaleMoney" jdbcType="DOUBLE" />
    <result column="accSaleCreatedTime" property="accSaleCreatedTime" jdbcType="TIMESTAMP" />
    <result column="companyId" property="companyId" jdbcType="VARCHAR" />
    <result column="accSaleStatus" property="accSaleStatus" jdbcType="VARCHAR" />
  </resultMap>

  <!--
    查询所有的销售记录
-->
  <select id="queryAll" resultMap="AccessoriesSaleMap">
    <![CDATA[
            select * from auto_platform.t_accessories_sale
        ]]>
  </select>

  <!--
      添加销售记录
  -->
  <insert id="insert" useGeneratedKeys="true" keyProperty="id" parameterType="AccessoriesSale">
    <![CDATA[
            INSERT INTO auto_platform.t_accessories_sale
            (accSaleId,accId, companyId, accSaledTime, accSaleCount,accSalePrice,accSaleTotal,accSaleDiscount, accSaleMoney,accSaleCreatedTime,accSaleStatus)
            VALUES
            (uuid(),#{accId},#{companyId},#{accSaledTime},#{accSaleCount},#{accSalePrice},#{accSaleTotal},#{accSaleDiscount},#{accSaleMoney} ,CURRENT_TIMESTAMP ,'Y')
        ]]>
  </insert>

  <!--
      更新销售记录信息
  -->
  <update id="update" keyProperty="id" parameterType="java.util.Map">
    UPDATE auto_platform.t_accessories_sale
    SET companyId=#{companyId}, accSaledTime=#{accSaledTime},
    accSaleCount=#{accSaleCount},accSalePrice=#{accSalePrice},
    accSaleDiscount=#{accSaleDiscount},accSaleMoney=#{accSaleMoney}
    WHERE accSaleId=#{accSaleId}
  </update>

  <!--
      根据id删除对应的配件销售记录
  -->
  <delete id="deleteById">
    DELETE FROM auto_platform.t_accessories_sale WHERE accSaleId=#{accSaleId}
  </delete>


  <!--
      冻结配件销售信息
  -->
  <update id="inactive" keyProperty="id" parameterType="string">
    <![CDATA[
        update auto_platform.t_accessories_sale set accSaleStatus = 'N' where accSaleId = #{accSaleId}
        ]]>
  </update>

  <!--
      激活配件销售信息
  -->
  <update id="active" keyProperty="id" parameterType="string">
    <![CDATA[
        update auto_platform.t_accessories_sale set accSaleStatus = 'Y' where accSaleId = #{accSaleId}
        ]]>
  </update>
</mapper>